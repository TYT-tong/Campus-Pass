# 角色权限接口文档

## 通用约定
- 响应体：`{ code: number, msg: string, data: any }`
- 成功：`code = 200`；未登录/过期：`code = 401`；其他错误：`code != 200`
- 鉴权：`Authorization: Bearer <token>`（由前端统一拦截器注入）

## 获取菜单树（用于新增角色选择权限）
- URL：`GET /system/menu/treeselect`
- 请求：无
- 响应示例：
```json
{
  "code": 200,
  "msg": "success",
  "data": [
    { "id": 1, "label": "系统管理", "children": [
      { "id": 11, "label": "用户管理" },
      { "id": 12, "label": "角色管理" }
    ]}
  ]
}
```
- 说明：字段需包含 `id`、`label`、`children`

## 获取角色菜单树与默认选中
- URL：`GET /system/menu/roleMenuTreeselect/{roleId}`
- 路径参数：`roleId` 角色ID
- 响应示例：
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "menus": [
      { "id": 1, "label": "系统管理", "children": [
        { "id": 11, "label": "用户管理" },
        { "id": 12, "label": "角色管理" }
      ]}
    ],
    "checkedKeys": [11, 12]
  }
}
```
- 说明：`menus` 同上；`checkedKeys` 为默认选中的菜单ID列表

## 新增角色（含权限）
- URL：`POST /system/role`
- 请求体：
```json
{
  "roleName": "运营",
  "description": "业务运营角色",
  "menuIds": [11, 12, 21]
}
```
- 响应示例：
```json
{ "code": 200, "msg": "success", "data": null }
```
- 要求：
  - `roleName` 必填，30 字以内
  - `menuIds` 可为空数组表示无权限

## 修改角色（含权限）
- URL：`PUT /system/role`
- 请求体：
```json
{
  "roleId": 1001,
  "roleName": "运营",
  "description": "业务运营角色",
  "menuIds": [11, 12, 21]
}
```
- 响应示例：
```json
{ "code": 200, "msg": "success", "data": null }
```
- 要求：
  - `roleId` 必填
  - 其余字段按需传递；`menuIds` 覆盖式更新

## 字段说明
- `id`：菜单唯一ID（number）
- `label`：菜单展示名称（string）
- `children`：子菜单（array）
- `checkedKeys`：角色拥有的菜单ID集合（array<number>）
- `roleId`：角色ID（number）
- `roleName`：角色名称（string）
- `description`：角色说明（string）
- `menuIds`：角色绑定的菜单ID集合（array<number>）

## 前端集成点
- 加载新增权限时调用 `GET /system/menu/treeselect`
- 加载编辑权限时调用 `GET /system/menu/roleMenuTreeselect/{roleId}`
- 提交新增调用 `POST /system/role`
- 提交编辑调用 `PUT /system/role`

## 错误处理
- 认证过期：返回 `code=401`，前端弹窗并跳转登录
- 其他错误：返回 `code!=200`，前端统一弹出错误消息
