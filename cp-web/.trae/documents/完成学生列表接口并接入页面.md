## 技术栈依据

* HTTP 封装：`src/utils/request.ts:7-13,15-57,59-127` 使用 axios，`baseURL=import.meta.env.VITE_APP_BASE_API || '/api'`，统一拦截与错误码处理。

* 类型定义：`src/types/api.d.ts:2-6,239-243` 提供 `ApiResponse`、`PageResponse`；`types/personnel.d.ts:1-12` 提供 `StudentType`。

* 页面位置：`src/views/personnel/student/index.vue:121-132` 已预留 `getStudentsData`，待接入接口。

## 接口实现

* 文件：`src/api/personnel/student.ts:1-11`

* 方法：

```ts
import request from '@/utils/request'
import type { ApiResponse, PageResponse } from '@/types/api'
import type { StudentType } from '#/personnel'

export function getStudentList(params: any): Promise<ApiResponse<PageResponse<StudentType>>> {
  return request({ url: '/system/student/list', method: 'get', params })
}
```

* 说明：接口已存在，遵循全局请求封装与类型约束，可直接调用。

## 页面接入

* 在 `index.vue` 注入并实现数据获取与分页、筛选联动：

```ts
import { getStudentList } from '@/api/personnel/student'

const total = ref(0)

const getStudentsData = async () => {
  const params = {
    pageNum: pager.page,
    pageSize: pager.size,
    keyword: query.keyword?.trim(),
    grade: query.grade || undefined,
    class: query.clazz || undefined,
    status: query.status || undefined,
  }
  const { data } = await getStudentList(params)
  list.value = data.rows
  total.value = data.total
}

watch(
  [() => query.keyword, () => query.grade, () => query.clazz, () => query.status, () => pager.page, () => pager.size],
  useDebounceFn(getStudentsData, 300)
)
```

* 视图联动：

  * 将分页器 `:total` 绑定为 `total`（由服务端返回）。

  * 保留现有排序与列可见逻辑，对 `list.value` 进行本地排序/导出。

  * 移除错误的 `import { get } from 'http'` 引入。

## 接口文档

* 名称：学生列表查询

* 方法：`GET`

* 路径：`/system/student/list`（完整：`${VITE_APP_BASE_API}/system/student/list`）

* Headers：

  * `Authorization: Bearer <token>`（全局拦截器自动注入，除非 `headers.isToken === false`）

  * `Content-Type: application/json;charset=utf-8`

* Query 参数：

  * `pageNum` number 当前页码

  * `pageSize` number 每页条数

  * `keyword` string 关键词（姓名或手机号）

  * `grade` string 年级（如：`高一`）

  * `class` string 班级（如：`1班`）

  * `status` string 状态（`ok`、`limit`、`ban`）

* 响应：`ApiResponse<PageResponse<StudentType>>`

  * `code` number 业务码（成功为 `200`）

  * `msg` string 消息

  * `data.total` number 总记录数

  * `data.rows` `StudentType[]`

* `StudentType`：

  * `student_id` number、`user_name` string、`student_name` string、`age` number、`sex` string、`phone` string、`parent_name` string、`class` string、`grade` string、`status?` string

* 请求示例：

  * `GET /system/student/list?pageNum=1&pageSize=10&keyword=张&grade=高一&class=1班&status=ok`

* 响应示例：

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "total": 128,
    "rows": [
      {
        "student_id": 1001,
        "user_name": "zhangsan",
        "student_name": "张三",
        "age": 16,
        "sex": "男",
        "phone": "13800000000",
        "parent_name": "张父",
        "class": "1班",
        "grade": "高一",
        "status": "ok"
      }
    ]
  }
}
```

* 错误码与处理（由全局响应拦截器负责）：

  * `401`：登录过期，触发登出与跳转

  * `500`：错误消息提示

  * `601`：警告消息提示

  * 其他非 `200`：统一错误通知

## 验证与使用

* 页面加载与筛选、分页变化时调用 `getStudentsData`，表格数据来自 `list.value`，分页总数来自 `total`。

