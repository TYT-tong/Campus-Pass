## 现象与初步判断
- 首次登录后，点击未加载过的页面出现黑屏；此前控制台曾出现“Failed to fetch dynamically imported module …/src/views/system/user/index.vue”与一串 Element Plus 样式资源 `net::ERR_ABORTED`。
- 这类问题通常由：
  1) 懒加载组件的动态导入失败（SFC 结构错误、路径不匹配、编译错误）；
  2) 动态路由生成的组件路径与实际文件不一致，导致 import 失败；
  3) 导航失败未被处理（路由层未显示错误、Layout 渲染区域未兜底），表现为空白（黑屏）。

## 诊断步骤（只读）
1. 复现场景：清空缓存后登录，打开浏览器控制台与网络面板，点击侧边栏中首次访问的页面，记录第一条错误堆栈。
2. 检查路由生成：
   - 审查 `usePermissionStore.buildRoute` 所得 `route.component` 是否返回有效的异步组件函数；
   - 对比后端返回的 `menu.component` 与本地实际文件路径（应能映射到 `/src/views/${cleanPath}.vue`）。
3. 审核目标视图文件：
   - 检查 `.vue` 文件是否存在结构性问题（如样式块后残留脚本、缺失结束标签）；
   - 之前在 `src/views/system/user/index.vue` 已发现并修复末尾残留脚本，需扩展到其它页面。
4. 观察加载失败时的路由行为：确认是否存在未处理的 `router.onError` 或页面兜底逻辑，导致错误静默→黑屏。

## 修复方案
- A. 加强动态导入的健壮性（避免黑屏）
  1) 在 `src/stores/permission.ts` 的 `loadComponent` 改为 `defineAsyncComponent` 包裹：
     - 提供 `timeout`、`onError` 与 `retry` 逻辑，失败时回退到 `Index.vue` 并提示；
     - 当 `modules[fullPath]` 不存在时立即回退。
  2) 在 `src/router/index.ts` 增加 `router.onError` 捕获：
     - 如果是 `Importing a module failed`，显示通知并重定向到 `/index`；
     - 保证用户看到明确反馈而非黑屏。
- B. 统一视图文件合法性
  1) 对 `src/views/**/*.vue` 做一次结构审查：确保 `</style>` 之后不再出现散落 JS/TS 代码；
  2) 将 `::v-deep` 统一为 `:deep()`（已在两处修正），减少编译器差异。
- C. 运行验证
  1) 清理缓存并重启开发服务；
  2) 首次登录后依次点击未访问过的页面，观察是否存在导入失败与黑屏；
  3) 样式资源的 `net::ERR_ABORTED` 如为级联错误，应随主错误消失。

## 代码变更要点
- `src/stores/permission.ts`
  - `loadComponent`：用 `defineAsyncComponent` 包装 `modules[fullPath]`；当路径缺失或加载失败时回退到 `Index.vue`。
- `src/router/index.ts`
  - 新增 `router.onError((err) => { ... })` 拦截动态导入错误并提示/回退。
- `src/views/**`（必要时）
  - 修正不合法的 SFC 结构；统一深度选择器。

## 交付与回归
- 修复后黑屏问题消除；首次打开未加载页面时如有错误将得到明确提示与安全回退。
- 提供一段简短文档说明动态导入错误处理策略与排查步骤，便于后续维护。