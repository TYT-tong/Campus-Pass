## 问题现状
- 返回 rows 为全部数据且 total=0，说明 MyBatis-Plus 分页拦截器未对当前查询生效。
- 现有联表查询在 XML 中（PerStudentMapper.xml），IPage.total 依赖拦截器的 COUNT 语句；未生效则 total 不填充、LIMIT 不应用。

## 方案目标
- 在不依赖拦截器的情况下也保证：
  - rows 仅返回当前页（pageNum/pageSize）
  - total 返回真实总数

## 改造内容
### 1) 联表 XML 增加手动分页与总数
- 文件：`cp-modules/cp-personnel/src/main/resources/mapper/personnel/PerStudentMapper.xml`
- 新增 count 查询：
  - `<select id="countStudent" resultType="long">` 与 `selectStudentPage` 使用同样的联表与动态条件，返回 `COUNT(1)`。
- 修改列表查询手动分页：
  - 在 `selectStudentPage` 中增加 `<bind name="offset" value="(page.current-1)*page.size"/>`
  - 在 SQL 末尾追加：`LIMIT #{page.size} OFFSET #{offset}`

### 2) Service 层填充 total 并返回当前页
- 文件：`cp-modules/cp-personnel/src/main/java/com/cp/personnel/service/impl/PerStudentServiceImpl.java`
- 在 `selectStudentPage(PerStudentQueryDTO dto)`：
  - 构造 `Page<?> page = PageUtils.buildPage()`
  - 先调用 `baseMapper.countStudent(dto)` 得到总数并设置到一个 `Page<PerStudentVO>` 的 `total`
  - 再调用 `baseMapper.selectStudentPage(page, dto)` 获取当前页数据记录，设置到 `records`
  - 返回 `Page<PerStudentVO>` 作为 `IPage` 给控制器，`getDataTable(IPage)` 会正确读取 total 与 rows

### 3) 配置检查
- `application.yml` 已有 `mybatis-plus.mapper-locations: classpath*:mapper/**/*.xml`（已添加）
- 启动类已含 `@MapperScan("com.cp.personnel.mapper")` 与 `@EnableCustomConfig`（已添加）

## 验证步骤
1. 构建并重启 personnel 模块
2. 访问：`/student/list?pageNum=1&pageSize=10`
3. 预期：rows.Count=10，total>0；日志可见 LIMIT/OFFSET（即使拦截器缺失）

## 交付
- 我将修改 XML 与 Service，构建并运行，返回接口响应与日志摘要，确认分页与总数正确。