# æ ¡å›­ä¸€å¡é€šç³»ç»ŸERå›¾ - PNGæ ¼å¼

ç”±äºç›´æ¥ç”ŸæˆPNGæ–‡ä»¶éœ€è¦é¢å¤–çš„å›¾åƒå¤„ç†åº“ï¼Œæˆ‘ä¸ºæ‚¨æä¾›å‡ ç§è·å–PNGæ ¼å¼ERå›¾çš„æ–¹æ³•ï¼š

## ğŸ“‹ æ–¹æ³•ä¸€ï¼šä½¿ç”¨åœ¨çº¿Mermaidç¼–è¾‘å™¨

1. è®¿é—® [Mermaid Live Editor](https://mermaid.live/)
2. å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°ç¼–è¾‘å™¨ä¸­ï¼š

```mermaid
erDiagram
    %% ç”¨æˆ·ç›¸å…³å®ä½“
    ç”¨æˆ· {
        bigint ç”¨æˆ·ID PK "ç”¨æˆ·ID"
        varchar ç”¨æˆ·è´¦å· "ç”¨æˆ·è´¦å·"
        varchar ç”¨æˆ·æ˜µç§° "ç”¨æˆ·æ˜µç§°"
        varchar æ‰‹æœºå·ç  "æ‰‹æœºå·ç "
        char ç”¨æˆ·æ€§åˆ« "0ç”· 1å¥³ 2æœªçŸ¥"
        varchar å¯†ç  "å¯†ç "
        char è´¦å·çŠ¶æ€ "0æ­£å¸¸ 1åœç”¨"
    }
    
    å­¦ç”Ÿ {
        bigint å­¦ç”ŸID PK "å­¦ç”ŸID"
        bigint ç”¨æˆ·ID FK "ç”¨æˆ·ID"
        varchar å­¦å· "å­¦å·"
        varchar å¹´çº§ "å¹´çº§"
        varchar ç­çº§ "ç­çº§"
        tinyint æ€§åˆ« "1ç”· 2å¥³"
        varchar èº«ä»½è¯å· "èº«ä»½è¯å·"
    }
    
    å®¶é•¿ {
        bigint å®¶é•¿ID PK "å®¶é•¿ID"
        bigint ç”¨æˆ·ID FK "ç”¨æˆ·ID"
        varchar ä¸å­¦ç”Ÿå…³ç³» "çˆ¶å­ æ¯å¥³ç­‰"
    }
    
    ç”¨æˆ·å…³ç³» {
        bigint å…³ç³»ID PK "å…³ç³»ID"
        bigint å­¦ç”ŸID FK "å­¦ç”ŸID"
        bigint å®¶é•¿ID FK "å®¶é•¿ID"
        varchar å…³ç³» "å…³ç³»æè¿°"
    }
    
    %% ICå¡å®ä½“
    ICå¡ {
        bigint å¡ç‰‡ID PK "å¡ç‰‡ID"
        varchar å¡å· "å¡å·"
        bigint å­¦ç”ŸID FK "å­¦ç”ŸID"
        decimal ä½™é¢ "ä½™é¢"
        tinyint çŠ¶æ€ "0æŒ‚å¤± 1æ­£å¸¸ 2æ³¨é”€"
        datetime æŒ‚å¤±æ—¶é—´ "æŒ‚å¤±æ—¶é—´"
    }
    
    %% å•†æˆ·å®ä½“
    å•†æˆ· {
        bigint å•†æˆ·ID PK "å•†æˆ·ID"
        varchar å•†æˆ·ç¼–å· "å•†æˆ·ç¼–å·"
        varchar å•†æˆ·åç§° "å•†æˆ·åç§°"
        varchar å•†æˆ·ç±»å‹ "é£Ÿå ‚ è¶…å¸‚ å›¾ä¹¦é¦†ç­‰"
        varchar è”ç³»äºº "è”ç³»äºº"
        varchar è”ç³»ç”µè¯ "è”ç³»ç”µè¯"
        varchar ç»“ç®—è´¦æˆ· "ç»“ç®—è´¦æˆ·"
        decimal æ‰‹ç»­è´¹ç‡ "æ‰‹ç»­è´¹ç‡"
        tinyint çŠ¶æ€ "0ç¦ç”¨ 1æ­£å¸¸"
    }
    
    %% è®¢å•å®ä½“
    å……å€¼è®¢å• {
        bigint è®¢å•ID PK "è®¢å•ID"
        varchar è®¢å•å· "è®¢å•å·"
        bigint å­¦ç”ŸID FK "å­¦ç”ŸID"
        bigint å®¶é•¿ID FK "å®¶é•¿ID"
        varchar å¡å· "å¡å·"
        decimal å……å€¼é‡‘é¢ "å……å€¼é‡‘é¢"
        varchar æ”¯ä»˜æ¸ é“ "wechat alipay"
        varchar æ¸ é“è®¢å•å· "æ¸ é“è®¢å•å·"
        tinyint çŠ¶æ€ "0å¾…æ”¯ä»˜ 1å·²æ”¯ä»˜ 2å·²å…³é—­"
        datetime æ”¯ä»˜æ—¶é—´ "æ”¯ä»˜æ—¶é—´"
    }
    
    æ¶ˆè´¹è®¢å• {
        bigint è®¢å•ID PK "è®¢å•ID"
        varchar è®¢å•å· "è®¢å•å·"
        bigint å­¦ç”ŸID FK "å­¦ç”ŸID"
        varchar å¡å· "å¡å·"
        bigint å•†æˆ·ID FK "å•†æˆ·ID"
        bigint POSç»ˆç«¯ID "POSç»ˆç«¯ID"
        decimal æ¶ˆè´¹é‡‘é¢ "æ¶ˆè´¹é‡‘é¢"
        decimal æ¶ˆè´¹å‰ä½™é¢ "æ¶ˆè´¹å‰ä½™é¢"
        decimal æ¶ˆè´¹åä½™é¢ "æ¶ˆè´¹åä½™é¢"
        tinyint çŠ¶æ€ "1æˆåŠŸ 2å¤±è´¥ 3å·²é€€æ¬¾"
        datetime æ¶ˆè´¹æ—¶é—´ "æ¶ˆè´¹æ—¶é—´"
    }
    
    %% å®ä½“å…³ç³»å®šä¹‰
    ç”¨æˆ· ||--o{ å­¦ç”Ÿ : "1å¯¹1"
    ç”¨æˆ· ||--o{ å®¶é•¿ : "1å¯¹1"
    å­¦ç”Ÿ ||--o{ ICå¡ : "1å¯¹å¤š"
    å­¦ç”Ÿ ||--o{ ç”¨æˆ·å…³ç³» : "1å¯¹å¤š"
    å®¶é•¿ ||--o{ ç”¨æˆ·å…³ç³» : "1å¯¹å¤š"
    å­¦ç”Ÿ ||--o{ å……å€¼è®¢å• : "1å¯¹å¤š"
    å®¶é•¿ ||--o{ å……å€¼è®¢å• : "1å¯¹å¤š"
    å­¦ç”Ÿ ||--o{ æ¶ˆè´¹è®¢å• : "1å¯¹å¤š"
    å•†æˆ· ||--o{ æ¶ˆè´¹è®¢å• : "1å¯¹å¤š"
    ICå¡ ||--o{ æ¶ˆè´¹è®¢å• : "1å¯¹å¤š"
```

3. ç‚¹å‡»"Download PNG"æŒ‰é’®ä¸‹è½½å›¾ç‰‡

## ğŸ“‹ æ–¹æ³•äºŒï¼šä½¿ç”¨VS Codeæ’ä»¶

å¦‚æœæ‚¨ä½¿ç”¨VS Codeï¼Œå¯ä»¥å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š

1. **Markdown Preview Mermaid Support**
2. **Mermaid Preview**

å®‰è£…åå¯ä»¥ç›´æ¥é¢„è§ˆå¹¶æˆªå›¾ä¿å­˜ä¸ºPNGæ ¼å¼ã€‚

## ğŸ“‹ æ–¹æ³•ä¸‰ï¼šä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·

å®‰è£…mermaid-cliå·¥å…·ï¼š

```bash
npm install -g @mermaid-js/mermaid-cli
```

ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”ŸæˆPNGï¼š

```bash
mmdc -i er-diagram.mmd -o er-diagram.png -w 1200 -H 800
```

## ğŸ“‹ æ–¹æ³•å››ï¼šä½¿ç”¨Pythonç”Ÿæˆ

å¦‚æœæ‚¨æœ‰Pythonç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š

```python
import base64
import requests

mermaid_code = '''
erDiagram
    ç”¨æˆ· ||--o{ å­¦ç”Ÿ : "1å¯¹1"
    å­¦ç”Ÿ ||--o{ ICå¡ : "1å¯¹å¤š"
    å­¦ç”Ÿ ||--o{ æ¶ˆè´¹è®¢å• : "1å¯¹å¤š"
    å•†æˆ· ||--o{ æ¶ˆè´¹è®¢å• : "1å¯¹å¤š"
'''

# ä½¿ç”¨mermaid.ink API
graphbytes = mermaid_code.encode("ascii")
base64_bytes = base64.b64encode(graphbytes)
base64_string = base64_bytes.decode("ascii")

# ç”ŸæˆPNG
url = f"https://mermaid.ink/img/{base64_string}"
response = requests.get(url)

# ä¿å­˜å›¾ç‰‡
with open("æ ¡å›­ä¸€å¡é€šERå›¾.png", "wb") as f:
    f.write(response.content)

print("PNGå›¾ç‰‡å·²ç”Ÿæˆ!")
```

## ğŸ“‹ ç°æˆçš„SVGæ–‡ä»¶

æˆ‘å·²ç»ä¸ºæ‚¨åˆ›å»ºäº†SVGæ ¼å¼çš„ERå›¾æ–‡ä»¶ï¼š`æ ¡å›­ä¸€å¡é€šERå›¾.svg`ï¼Œæ‚¨å¯ä»¥ç›´æ¥ï¼š

1. **åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€**ï¼šåŒå‡»SVGæ–‡ä»¶å³å¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹
2. **è½¬æ¢ä¸ºPNG**ï¼š
   - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€SVGæ–‡ä»¶
   - å³é”®ç‚¹å‡» â†’ "å¦å­˜ä¸ºå›¾ç‰‡" 
   - æˆ–ä½¿ç”¨æˆªå›¾å·¥å…·ä¿å­˜

3. **ä½¿ç”¨åœ¨çº¿è½¬æ¢å·¥å…·**ï¼š
   - è®¿é—® [SVG to PNG Converter](https://svgtopng.com/)
   - ä¸Šä¼ SVGæ–‡ä»¶
   - ä¸‹è½½è½¬æ¢åçš„PNG

## ğŸ“Š æ¨èæ–¹æ¡ˆ

**æœ€ç®€ä¾¿çš„æ–¹æ³•**ï¼šä½¿ç”¨åœ¨çº¿Mermaidç¼–è¾‘å™¨ç›´æ¥å¯¼å‡ºPNGï¼Œæˆ–è€…æ‰“å¼€æˆ‘æä¾›çš„SVGæ–‡ä»¶åæˆªå›¾ä¿å­˜ã€‚

**æœ€é«˜è´¨é‡çš„æ–¹æ³•**ï¼šä½¿ç”¨mermaid-cliå‘½ä»¤è¡Œå·¥å…·ç”Ÿæˆé«˜åˆ†è¾¨ç‡PNGå›¾ç‰‡ã€‚

æ‚¨é€‰æ‹©å“ªç§æ–¹æ³•éƒ½å¯ä»¥è·å¾—é«˜è´¨é‡çš„ERå›¾PNGæ ¼å¼æ–‡ä»¶ï¼