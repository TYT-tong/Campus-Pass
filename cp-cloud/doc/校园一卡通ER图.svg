<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="1200" height="800" fill="#f8f9fa"/>
  
  <!-- 标题 -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">
    校园一卡通系统ER图
  </text>
  
  <!-- 用户实体 -->
  <g id="user">
    <!-- 实体矩形 -->
    <rect x="50" y="80" width="120" height="160" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="110" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">用户</text>
    
    <!-- 属性椭圆 -->
    <ellipse cx="30" cy="130" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">用户ID</text>
    
    <ellipse cx="30" cy="155" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">用户账号</text>
    
    <ellipse cx="30" cy="180" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">手机号码</text>
    
    <ellipse cx="30" cy="205" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">账号状态</text>
    
    <!-- 连接线 -->
    <line x1="70" y1="130" x2="90" y2="130" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="155" x2="90" y2="155" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="180" x2="90" y2="180" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="205" x2="90" y2="205" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 学生实体 -->
  <g id="student">
    <rect x="300" y="80" width="120" height="140" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="360" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">学生</text>
    
    <ellipse cx="250" cy="130" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">学生ID</text>
    
    <ellipse cx="250" cy="155" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">学号</text>
    
    <ellipse cx="250" cy="180" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">年级</text>
    
    <ellipse cx="250" cy="205" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">班级</text>
    
    <line x1="320" y1="130" x2="290" y2="130" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="155" x2="290" y2="155" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="180" x2="290" y2="180" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="205" x2="290" y2="205" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 家长实体 -->
  <g id="parent">
    <rect x="550" y="80" width="120" height="100" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="610" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">家长</text>
    
    <ellipse cx="500" cy="130" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">家长ID</text>
    
    <ellipse cx="500" cy="155" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">关系</text>
    
    <line x1="570" y1="130" x2="540" y2="130" stroke="#666" stroke-width="1"/>
    <line x1="570" y1="155" x2="540" y2="155" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- IC卡实体 -->
  <g id="iccard">
    <rect x="800" y="80" width="120" height="120" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="860" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">IC卡</text>
    
    <ellipse cx="750" cy="130" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="750" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">卡片ID</text>
    
    <ellipse cx="750" cy="155" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="750" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">卡号</text>
    
    <ellipse cx="750" cy="180" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="750" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">余额</text>
    
    <line x1="820" y1="130" x2="790" y2="130" stroke="#666" stroke-width="1"/>
    <line x1="820" y1="155" x2="790" y2="155" stroke="#666" stroke-width="1"/>
    <line x1="820" y1="180" x2="790" y2="180" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 商户实体 -->
  <g id="merchant">
    <rect x="50" y="320" width="120" height="140" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="110" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">商户</text>
    
    <ellipse cx="30" cy="370" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">商户ID</text>
    
    <ellipse cx="30" cy="395" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">商户编号</text>
    
    <ellipse cx="30" cy="420" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">商户名称</text>
    
    <ellipse cx="30" cy="445" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="30" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">商户类型</text>
    
    <line x1="70" y1="370" x2="90" y2="370" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="395" x2="90" y2="395" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="420" x2="90" y2="420" stroke="#666" stroke-width="1"/>
    <line x1="70" y1="445" x2="90" y2="445" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 充值订单实体 -->
  <g id="recharge">
    <rect x="300" y="320" width="120" height="160" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="360" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">充值订单</text>
    
    <ellipse cx="250" cy="370" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">订单ID</text>
    
    <ellipse cx="250" cy="395" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">订单号</text>
    
    <ellipse cx="250" cy="420" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">充值金额</text>
    
    <ellipse cx="250" cy="445" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">支付渠道</text>
    
    <ellipse cx="250" cy="470" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="250" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">状态</text>
    
    <line x1="320" y1="370" x2="290" y2="370" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="395" x2="290" y2="395" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="420" x2="290" y2="420" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="445" x2="290" y2="445" stroke="#666" stroke-width="1"/>
    <line x1="320" y1="470" x2="290" y2="470" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 消费订单实体 -->
  <g id="consume">
    <rect x="550" y="320" width="120" height="160" fill="#ffd4a3" stroke="#333" stroke-width="2" rx="5"/>
    <text x="610" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">消费订单</text>
    
    <ellipse cx="500" cy="370" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">订单ID</text>
    
    <ellipse cx="500" cy="395" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">订单号</text>
    
    <ellipse cx="500" cy="420" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">消费金额</text>
    
    <ellipse cx="500" cy="445" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">消费时间</text>
    
    <ellipse cx="500" cy="470" rx="40" ry="15" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="500" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">状态</text>
    
    <line x1="570" y1="370" x2="540" y2="370" stroke="#666" stroke-width="1"/>
    <line x1="570" y1="395" x2="540" y2="395" stroke="#666" stroke-width="1"/>
    <line x1="570" y1="420" x2="540" y2="420" stroke="#666" stroke-width="1"/>
    <line x1="570" y1="445" x2="540" y2="445" stroke="#666" stroke-width="1"/>
    <line x1="570" y1="470" x2="540" y2="470" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 关系菱形 -->
  <!-- 用户-学生关系 -->
  <g id="relation-user-student">
    <polygon points="170,140 190,120 210,140 190,160" fill="#a8e6cf" stroke="#333" stroke-width="2"/>
    <text x="190" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">拥有</text>
    <text x="150" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <text x="230" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <line x1="170" y1="140" x2="170" y2="160" stroke="#666" stroke-width="1"/>
    <line x1="210" y1="140" x2="300" y2="140" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 用户-家长关系 -->
    <!-- 用户-家长关系 -->
  <g id="relation-user-parent">
    <polygon points="420,140 440,120 460,140 440,160" fill="#a8e6cf" stroke="#333" stroke-width="2"/>
    <text x="440" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">拥有</text>
    <text x="400" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <text x="480" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <line x1="420" y1="140" x2="420" y2="160" stroke="#666" stroke-width="1"/>
    <line x1="460" y1="140" x2="550" y2="130" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 学生-IC卡关系 -->
  <g id="relation-student-iccard">
    <polygon points="670,140 690,120 710,140 690,160" fill="#a8e6cf" stroke="#333" stroke-width="2"/>
    <text x="690" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">拥有</text>
    <text x="650" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <text x="730" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">N</text>
    <line x1="670" y1="140" x2="670" y2="160" stroke="#666" stroke-width="1"/>
    <line x1="710" y1="140" x2="800" y2="140" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 学生-充值订单关系 -->
  <g id="relation-student-recharge">
    <polygon points="360,270 380,250 400,270 380,290" fill="#a8e6cf" stroke="#333" stroke-width="2"/>
    <text x="380" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">接收</text>
    <text x="340" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <text x="420" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">N</text>
    <line x1="360" y1="270" x2="300" y2="220" stroke="#666" stroke-width="1"/>
    <line x1="400" y1="270" x2="360" y2="320" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 商户-消费订单关系 -->
  <g id="relation-merchant-consume">
    <polygon points="610,270 630,250 650,270 630,290" fill="#a8e6cf" stroke="#333" stroke-width="2"/>
    <text x="630" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">处理</text>
    <text x="590" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">1</text>
    <text x="670" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">N</text>
    <line x1="610" y1="270" x2="170" y2="460" stroke="#666" stroke-width="1"/>
    <line x1="650" y1="270" x2="610" y2="320" stroke="#666" stroke-width="1"/>
  </g>
  
  <!-- 图例 -->
  <g id="legend">
    <text x="50" y="550" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">图例:</text>
    
    <rect x="50" y="570" width="60" height="30" fill="#ffd4a3" stroke="#333" stroke-width="1" rx="3"/>
    <text x="80" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">实体</text>
    
    <polygon points="150,570 170,550 190,570 170,590" fill="#a8e6cf" stroke="#333" stroke-width="1"/>
    <text x="170" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">关系</text>
    
    <ellipse cx="260" cy="585" rx="30" ry="12" fill="#a8d8ea" stroke="#333" stroke-width="1"/>
    <text x="260" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">属性</text>
    
    <text x="50" y="620" font-family="Arial, sans-serif" font-size="10" fill="#666">基数: 1-一对一, N-一对多, M-多对多</text>
  </g>
  
  <!-- 整体关系说明 -->
  <g id="description">
    <text x="600" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">校园一卡通系统实体关系图</text>
    <text x="600" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">本图展示了校园一卡通系统的核心实体及其关系</text>
    <text x="600" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">包含用户管理、卡片管理、商户管理、订单管理等模块</text>
  </g>
</svg>